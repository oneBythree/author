"use strict";Vue.transition("fadeIn",{enterClass:"fadeIn",leaveClass:"fadeOut"}),Vue.transition("fadeDown",{enterClass:"fadeInDown",leaveClass:"fadeOutUp"});var app=new Vue({el:"#newIndex",data:function(){return{isSearchInLine:!1,city:"",recommendCitys:[],query:"",isAdd:!1,startCity:"",endCity:"",tempSelected:"",filterList:[],addressData:address,showListStart:!0,showListEnd:!0,ajaxStart:"",ajaxEnd:"",commRouters:[],searchData:[]}},ready:function(){this.initData()},methods:{initData:function(){var t=this,e="http://test.haitat.com/api/user/route/main?user=1";$.get(e,{},function(e){"1"==e.code?(t.city=e.data.user.location.hasOwnProperty("city")?e.data.user.location.city:"未定位",t.recommendCitys=e.data.recommend_city,t.commRouters=e.data.top_lines):"50010"==e.code&&$.ModuleTip({txt:e.message})})},showSearchInLine:function(){this.isSearchInLine=!0,setTimeout(function(){$("#searchInput").focus()},200)},searchBlur:function(){""!=this.query&&void 0!=this.query||(this.isSearchInLine=!1)},backIndex:function(){this.isSearchInLine=!1},cleanKey:function(){this.query="",$("#searchInput").focus()},searchQueryRouter:function(t){console.log(t)},showAdd:function(){this.isAdd=!0},closeAdd:function(){this.isAdd=!1,this.startCity=this.endCity=""},selectedClick:function(t,e){"start"==e?(this.startCity=t.name,this.ajaxStart=t,this.showListStart=!1):(this.endCity=t.name,this.ajaxEnd=t,this.showListEnd=!1)},input:function(t,e){"start"==e?(this.showListStart=!!t,this.ajaxStart=""):(e="end")&&(this.showListEnd=!!t,this.ajaxEnd="")},blurInput:function(t){var e=this;setTimeout(function(){"start"==t?(e.startCity=""==e.ajaxStart?"":e.startCity,e.showListStart=!1):(e.endCity=""==e.ajaxEnd?"":e.endCity,e.showListEnd=!1)},250)},enter:function(){return!1},linkRouters:function(t){t&&(location.href="http://test.haitat.com/user/routes/"+t)},addCommon:function(){var t=this;if(""==t.startCity)return $.ModuleTip({txt:"出发城市不能为空"}),!1;if(""==t.endCity)return $.ModuleTip({txt:"到达城市不能为空"}),!1;if(t.ajaxStart.code==t.ajaxEnd.name)return $.ModuleTip({txt:"出发城市不能为到达城市"}),!1;var e="http://test.haitat.com/api/user/route/add",a={start:t.ajaxStart.name,end:t.ajaxEnd.name,start_py:t.ajaxStart.namef_full_py,end_py:t.ajaxEnd.namef_full_py,user:1};$.get(e,a,function(e){"1"==e.code?t.commRouters.push({start:t.ajaxStart.name,end:t.ajaxEnd.name,id:e.data.id}):"50010"==e.code&&$.ModuleTip({txt:e.message}),t.closeAdd()})},searchQuery:function(t){var e=this,a="http://test.haitat.com/api/user/city/suggest",i=(new Date).getTime(),n={q:t,t:i};console.log(n),$.get(a,n,function(t){"1"==t.code?e.searchData=t.data.items:"50010"==t.code&&$.ModuleTip({txt:t.message})})},selectedCity:function(t){t&&(this.city=t,this.backIndex())}}});